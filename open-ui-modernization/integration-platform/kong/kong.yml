_format_version: "2.1"
_transform: true

services:
  # Claims Processing Service (REST)
  - name: claims-processing
    url: http://claims-processing:3001
    routes:
      - name: claims-processing-route
        paths:
          - /api/claims
    plugins: []

  # Benefits Administration Service (REST)
  - name: benefits-administration
    url: http://benefits-administration:3002
    routes:
      - name: benefits-admin-route
        paths:
          - /api/benefits
    plugins: []

  # Rules Engine API Service (REST)
  - name: rules-engine
    url: http://rules-engine:3003
    routes:
      - name: rules-engine-route
        paths:
          - /api/rules
    plugins: []
    
  # Employer Service (REST)
  - name: employer-service
    url: http://employer-service:3004
    routes:
      - name: employer-service-route
        paths:
          - /api/employer
    plugins: []

  # Tax Administration Service (SOAP)
  - name: tax-administration
    url: http://tax-administration:3005/soap
    routes:
      - name: tax-soap-route
        paths:
          - /soap/tax
    plugins:
      # Plugin to handle SOAP transformations
      - name: request-transformer
        config:
          add:
            headers: ["Content-Type:text/xml"]